(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{113:function(e,t,a){e.exports=a(261)},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},153:function(e,t,a){},164:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){},174:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},242:function(e,t){},245:function(e,t,a){},246:function(e,t,a){},247:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){},253:function(e,t,a){},254:function(e,t,a){},255:function(e,t,a){},256:function(e,t,a){},259:function(e,t,a){},260:function(e,t,a){},261:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(29),l=a.n(c),s=(a(118),a(119),a(20)),o=(a(120),a(121),a(122),a(10)),i=a.n(o),u=function(e){var t=e.children,a=e.noIndentation;return r.a.createElement("div",{className:i()("main-bg",{indentation:a})},t)},m=a(103),d=a(44),f=function(e){return Object(d.a)(new Date(e),{representation:"date"})},p=function(e){var t=e.user;return r.a.createElement(u,null,r.a.createElement("div",{className:"user-info"},r.a.createElement("div",{className:"user-info__utils"},r.a.createElement("h1",{className:"user-info__utils-heading"},t.fullName),r.a.createElement("span",{className:"user-info__utils-status"},"Offline")),r.a.createElement("ul",{className:"user-info__list"},t.city?r.a.createElement("li",{className:"user-info__item"},"\u0413\u043e\u0440\u043e\u0434:",r.a.createElement("span",null,t.city)):null,t.birthday?r.a.createElement("li",{className:"user-info__item"},"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f:",r.a.createElement("span",null,f(t.birthday)," ","(",new m.AgeFromDateString(f(t.birthday)).age," \u043b\u0435\u0442)")):null,t.sex?r.a.createElement("li",{className:"user-info__item"},"\u041f\u043e\u043b:",r.a.createElement("span",null,t.sex)):null,t.about?r.a.createElement("li",{className:"user-info__item"},"\u041e \u0441\u0435\u0431\u0435:",r.a.createElement("span",null,t.about)):null)))},E=(a(123),a(124),a(125),function(e){var t=e.img,a=e.name,n=e.small,c=e.middle,l=e.large;return r.a.createElement("div",{className:"avatar"},r.a.createElement("img",{src:"/uploads/avatars/".concat(t),alt:a,className:i()("avatar__img",{"avatar__img-small":n,"avatar__img-middle":c,"avatar__img-large":l})}))}),g=a(7),v=function(e){var t=e.item;return r.a.createElement("div",{className:"friend-item"},r.a.createElement(g.b,{to:"/user/".concat(t._id),className:"friend"},r.a.createElement(E,{middle:!0,img:t.avatar}),r.a.createElement("div",null,t.firstName)))},b=a(4),h=a.n(b),_=a(6),N=a.n(_),O=a(105),y=function(e,t){return function(a){var n=Object(O.uuid)();a({type:"SET_ALERT",payload:{id:n,type:e,message:t}}),setTimeout((function(){return a({type:"REMOVE_ALERT",payload:n})}),3e3)}},w=function(e){return function(t){t({type:"SEARCH_VISIBLE",payload:e})}},j=function(e){return function(t){t({type:"OPEN_MODAL",payload:e})}},S=a(2),x=Object(S.b)(null,{getFriends:function(e){return function(t){t({type:"GET_FRIENDS",payload:e})}},setShowModal:j})((function(e){var t=e.data,a=e.type,n=e.getFriends,c=e.setShowModal;return r.a.createElement(u,null,r.a.createElement("div",{className:"friends"},r.a.createElement("div",{className:"friends__heading"},r.a.createElement("span",null,a,": ",t.length),t.length>3?r.a.createElement("span",{className:"friends__heading-all",onClick:function(){n(t),c("friends")}},"\u0412\u0441\u0435"):null),r.a.createElement("div",{className:"friends__wrap"},t.slice(0,3).map((function(e){return r.a.createElement(v,{key:e._id,item:e})})))))})),k=(a(153),a(42)),A=a.n(k),C=(a(164),a(24)),I=a.n(C),T=(a(167),function(e){var t=e.likes;return r.a.createElement("div",{className:"likes-view"},0===t.length?r.a.createElement("p",{className:"empty_likes"},"\u041f\u0443\u0441\u0442\u043e"):t.map((function(e){return r.a.createElement(g.b,{key:e._id,to:"/user/".concat(e._id)},r.a.createElement(E,{small:!0,img:e.avatar}))})))}),L=a(8),R=(a(168),a(169),Object(n.forwardRef)((function(e,t){return"file"===e.type?r.a.createElement("div",{className:"upload-btn-wrapper"},r.a.createElement("button",{className:"upload-btn"},e.icon?r.a.createElement("i",{className:"fas fa-paperclip"}):r.a.createElement("span",null,e.text)),r.a.createElement("input",Object.assign({ref:t},e,{type:e.type}))):r.a.createElement("div",{className:"custom-input__form-field"},e.label&&r.a.createElement("label",{htmlFor:e.id,className:"custom-input__label"},e.label),r.a.createElement("input",Object.assign({},e,{type:e.type,id:e.id,className:"custom-input__input"})))}))),M=R,D=a(13),U=(a(170),function(e){var t=e.children,a=e.unfollow,n=Object(D.a)(e,["children","unfollow"]);return r.a.createElement("button",Object.assign({},n,{className:i()("btn",{unfollow:a})}),t)}),F=Object(S.b)(null,{createComment:function(e){var t=e.postId,a=e.text;return function(e){var n;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h.a.awrap(N.a.post("/api/comments/create-comment/".concat(t),{text:a}));case 2:n=r.sent,e({type:"CREATE_COMMENT",payload:{comment:n.data,postId:t}});case 4:case"end":return r.stop()}}))}}})((function(e){var t=e.postId,a=e.createComment,c=Object(n.useState)(""),l=Object(L.a)(c,2),s=l[0],o=l[1];return r.a.createElement("div",{className:"comment-create"},r.a.createElement("form",{className:"comment-create_form",onSubmit:function(e){e.preventDefault(),a({postId:t,text:s}),o("")}},r.a.createElement(M,{placeholder:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",type:"text",value:s,onChange:function(e){return o(e.target.value)}}),r.a.createElement(U,null,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))})),G=(a(171),a(172),function(e){return Object(d.a)(new Date(e),{representation:"date"})}),V=Object(S.b)((function(e){return{user:e.auth.user}}),{deleteComment:function(e){var t=e.postId,a=e._id;return function(e){return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(N.a.delete("/api/comments/delete-comment/".concat(a)));case 2:e({type:"DELETE_COMMENT",payload:{postId:t,_id:a}});case 3:case"end":return n.stop()}}))}}})((function(e){var t=e.text,a=e._id,n=e.postId,c=e.createdAt,l=e.deleteComment,s=e.user,o=e.author;return r.a.createElement("div",{className:"comment_item"},r.a.createElement(E,{small:!0,img:o.avatar}),r.a.createElement("div",{className:"comment_item-user"},r.a.createElement("div",{className:"comment_item-data"},r.a.createElement("div",{className:"comment_item-fullname"},o.fullName),r.a.createElement("div",{className:"comment_item-date"},G(c))),r.a.createElement("div",{className:"comment_item-text"},t)),s&&s._id===o._id&&r.a.createElement("span",{className:"comment_item-delete",onClick:function(){return l({postId:n,_id:a})}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))})),H=function(e){var t=e.comments;return r.a.createElement(r.a.Fragment,null,t.length>0?r.a.createElement(A.a,{transitionName:"comments",transitionEnterTimeout:500,transitionLeaveTimeout:300},t.map((function(e){return r.a.createElement(V,Object.assign({key:e._id},e))}))):r.a.createElement("p",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432 \u043d\u0435\u0442"))},P=Object(S.b)((function(e){return{user:e.auth.user}}),{likeUnlike:function(e){return function(t){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.awrap(N.a.patch("/api/posts/".concat(e,"/likes")));case 3:a=n.sent,t({type:"LIKE_UNLIKE",payload:{likes:a.data,postId:e}}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t(y("error",n.t0.response.data.error));case 10:case"end":return n.stop()}}),null,null,[[0,7]])}},deletePost:function(e){return function(t){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.awrap(N.a.delete("/api/posts/".concat(e)));case 3:t({type:"DELETE_POST",payload:e}),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),t(y("error",a.t0.response.data.error));case 9:case"end":return a.stop()}}),null,null,[[0,6]])}},showComments:function(e){return function(t){t({type:"VISIBLE_COMMENTS",payload:e})}}})((function(e){var t=e.user,a=e.post,n=e.likeUnlike,c=e.deletePost,l=e.showComments;return r.a.createElement("div",{className:"post_item"},r.a.createElement("div",{className:"post_item-author"},r.a.createElement(E,{small:!0,img:a.user.avatar}),r.a.createElement("div",{className:"post_item-author_data"},r.a.createElement("div",{className:"post_item-author_name"},a.user.fullName),r.a.createElement("div",{className:"post_item-author_date"},r.a.createElement(I.a,{format:"DD-MM-YYYY HH:mm"},a.createdAt)))),a.postImg?r.a.createElement("div",{className:"post_item-img"},r.a.createElement("img",{src:"/uploads/posts/".concat(a.postImg),alt:a._id})):null,a.text?r.a.createElement("p",{className:"post_item-text"},a.text):null,r.a.createElement("div",{className:"post_item-utils"},r.a.createElement("div",{className:"post_item-likes"},r.a.createElement("div",{onClick:function(){return n(a._id)},className:"fas fa-heart"},r.a.createElement(T,{likes:a.likes})),r.a.createElement("span",null,a.likes.length)),r.a.createElement("div",{onClick:function(){return l(a._id)},className:"post_item-comments"},r.a.createElement("i",{className:"fas fa-comments"}),r.a.createElement("span",null,a.comments.length)),t._id===a.user._id?r.a.createElement("div",{className:"post_item-delete"},r.a.createElement("i",{onClick:function(){return c(a._id)},className:"fas fa-trash-alt"})):null),a.showComments&&a.comments.length>0?r.a.createElement(H,{comments:a.comments}):null,r.a.createElement(F,{postId:a._id}))})),W=function(e){var t=e.posts;return r.a.createElement("div",{className:"post"},r.a.createElement("h3",null,0===t.length?"\u0417\u0434\u0435\u0441\u044c \u0435\u0449\u0435 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435\u0442 \ud83d\ude1f":"\u0412\u0441\u0435\u0433\u043e \u043f\u043e\u0441\u0442\u043e\u0432: "+t.length),r.a.createElement(A.a,{transitionName:"posts",transitionEnterTimeout:500,transitionLeaveTimeout:300},t.map((function(e){return r.a.createElement(P,{key:e._id,post:e})}))))},B=(a(173),a(174),function(e){var t=e.label,a=Object(D.a)(e,["label"]);return r.a.createElement("div",{className:"customTextArea__field"},t&&r.a.createElement("label",{className:"customTextArea__label"},t),r.a.createElement("textarea",Object.assign({className:"customTextArea__textarea"},a)))}),K=a(43),Y=(a(87),Object(S.b)((function(e){return{theme:e.theme.theme}}),{createPost:function(e){return function(t){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.awrap(N.a.post("/api/posts/post-create",e));case 3:a=n.sent,t({type:"CREATE_POST",payload:a.data}),t(y("success","\u041f\u043e\u0441\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d!")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),t(y("error",n.t0.response.data.error));case 11:case"end":return n.stop()}}),null,null,[[0,8]])}}})((function(e){var t=e.createPost,a=e.theme,c=Object(n.useState)(null),l=Object(L.a)(c,2),s=l[0],o=l[1],i=Object(n.useState)(null),m=Object(L.a)(i,2),d=m[0],f=m[1],p=Object(n.createRef)(),E=Object(n.useState)(!1),g=Object(L.a)(E,2),v=g[0],b=g[1],h=Object(n.useState)(""),_=Object(L.a)(h,2),N=_[0],O=_[1],y=function(){p.current.value=null,o(null),f(null)};return r.a.createElement(u,null,r.a.createElement("div",{className:"post-create"},r.a.createElement("form",{className:"post-create__form",onSubmit:function(e){if(e.preventDefault(),b(!1),N.trim()||s){var a=new FormData;a.append("postImg",s),a.append("text",N),t(a),O(""),y()}}},r.a.createElement(B,{type:"text",name:"text",onChange:function(e){return O(e.target.value)},value:N,onFocus:function(){return b(!1)},placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0447\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c..."}),r.a.createElement("div",{className:"post-create__addition"},r.a.createElement("i",{onClick:function(){return b(!0)},className:"fas fa-laugh-wink"},v?r.a.createElement("span",{className:"picker"},r.a.createElement(K.a,{darkMode:"light"===a,onSelect:function(e){O(N+=e.native)},set:"apple"})):null),r.a.createElement(M,{ref:p,name:"postImg",type:"file",id:"file",icon:!0,label:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u0430\u0439\u043b",onChange:function(e){o(e.target.files[0]),f(URL.createObjectURL(e.target.files[0]))}})),r.a.createElement(U,null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0441\u0442")),d?r.a.createElement("div",{className:"post_preview"},r.a.createElement("img",{src:d,alt:s.name}),r.a.createElement("span",{onClick:y,className:"post_preview-delete"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")):null))}))),q=(a(206),function(){return r.a.createElement("div",{className:"lds-ripple"},r.a.createElement("div",null),r.a.createElement("div",null))}),z=(a(207),a(208),Object(S.b)(null,{setShowModal:j})((function(e){var t=e.children,a=e.small,n=e.big,c=e.middle,l=e.setShowModal;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:i()("modal",{small:a,big:n,middle:c})},t),r.a.createElement("div",{onClick:function(){return l(null)},className:"modal_overlay"}))}))),J=Object(S.b)(null,{createDialog:function(e){return function(t){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.awrap(N.a.post("/api/dialogs/create/".concat(e.userId),{text:e.text}));case 3:a.next=8;break;case 5:a.prev=5,a.t0=a.catch(0),t(y("error",a.t0.response.data.error));case 8:case"end":return a.stop()}}),null,null,[[0,5]])}},setShowModal:j})((function(e){var t=e.userId,a=e.createDialog,c=e.setShowModal,l=Object(n.useState)(),s=Object(L.a)(l,2),o=s[0],i=s[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{small:!0},r.a.createElement("div",{className:"create-dialog"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a({userId:t,text:o}),c(null),i("")}},r.a.createElement(B,{onChange:function(e){i(e.target.value)},value:o}),r.a.createElement("div",{className:"create-dialog_controls"},r.a.createElement(U,{type:"submit"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),r.a.createElement("i",{onClick:function(){return c(null)},className:"fas fa-window-close"}))))))})),$=(a(209),Object(S.b)((function(e){return{friends:e.users.friends}}))((function(e){var t=e.friends;return r.a.createElement(z,{big:!0},r.a.createElement("div",{className:"full-friends"},t&&t.length>0?t.map((function(e){return r.a.createElement("div",{key:e._id,className:"full-friends_item"},r.a.createElement(g.b,{to:"/user/".concat(e._id)},r.a.createElement(E,{middle:!0,img:e.avatar})),r.a.createElement("div",{className:"name"},e.fullName))})):r.a.createElement("p",null,"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e!")))}))),Q=(a(210),Object(S.b)(null,{setAvatar:function(e){return function(t){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.awrap(N.a.put("/api/users/user/avatar-upload",e));case 3:a=n.sent,t({type:"SET_AVATAR",payload:a.data}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t(y("error",n.t0.response.data.error));case 10:case"end":return n.stop()}}),null,null,[[0,7]])}}})((function(e){var t=e.user,a=e.history,c=e.myUser,l=e.unfollowUser,s=e.followUser,o=e.follow,i=e.setShowModal,m=e.setAvatar,d=Object(n.useState)(null),f=Object(L.a)(d,2),p=f[0],g=f[1];return r.a.createElement(u,null,r.a.createElement("div",{className:"home-page__user-view"},r.a.createElement("div",{className:"avatar"},r.a.createElement(E,{large:!0,img:t.avatar,name:"avatar"}),t._id===c._id&&r.a.createElement("form",{className:"avatar_form",onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("avatar",p,p.name),m(t),g(null)}},!p&&r.a.createElement("div",{className:"avatar_button"},r.a.createElement(M,{type:"file",text:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u043e\u0442\u043e",name:"avatar",onChange:function(e){g(e.target.files[0])}})),r.a.createElement("div",{className:"avatar_form-actions"},p&&r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null,"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"),r.a.createElement(U,{onClick:function(){return g(null)}},"\u041e\u0442\u043c\u0435\u043d\u0430"))))),r.a.createElement("div",{className:"home-page__user-actions"},t._id!==c._id?r.a.createElement(r.a.Fragment,null,function(e,t){return e.followers.find((function(e){return e._id===t._id}))}(t,c)||o?r.a.createElement(U,{onClick:function(){return l(t._id)},unfollow:!0},"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"):r.a.createElement(U,{onClick:function(){return s(t._id)}},"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"),r.a.createElement(U,{onClick:function(){return i("dialog")}},"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c")):r.a.createElement(U,{onClick:function(){return a.push("/edit-user")}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))))}))),X=Object(S.b)((function(e){var t=e.users,a=t.user,n=t.loading,r=t.toggleFollow,c=e.auth,l=e.others;return{user:a,loading:n,myUser:c.user,follow:r,showModal:l.showModal}}),{getUser:function(e){return function(t){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.awrap(N.a.get("/api/users/".concat(e)));case 3:a=n.sent,t({type:"GET_USER",payload:a.data}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t(y("error",n.t0.response.data.error));case 10:case"end":return n.stop()}}),null,null,[[0,7]])}},unfollowUser:function(e){return function(t){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.awrap(N.a.delete("/api/follow/".concat(e)));case 3:a=n.sent,t({type:"UNFOLLOW_USER",payload:a.data}),t(y("success","\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0438\u0441\u0430\u043b\u0438\u0441\u044c")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),t(y("error",n.t0.response.data.error));case 11:case"end":return n.stop()}}),null,null,[[0,8]])}},followUser:function(e){return function(t){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.awrap(N.a.post("/api/follow/".concat(e)));case 3:a=n.sent,t({type:"FOLLOW_USER",payload:a.data}),t(y("success","\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043b\u0438\u0441\u044c")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),t(y("error",n.t0.response.data.error));case 11:case"end":return n.stop()}}),null,null,[[0,8]])}},setShowModal:j})((function(e){var t=e.match,a=e.getUser,c=e.user,l=e.loading,s=e.myUser,o=e.history,i=e.unfollowUser,u=e.followUser,m=e.follow,d=e.showModal,f=e.setShowModal;return Object(n.useEffect)((function(){a(t.params.id)}),[a,t.params.id]),r.a.createElement("div",{className:"home-page"},l||null===c||null===s?r.a.createElement(q,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"home-page__user"},"dialog"===d?r.a.createElement(J,{userId:c._id}):null,"friends"===d?r.a.createElement($,null):null,r.a.createElement(Q,{user:c,history:o,myUser:s,unfollowUser:i,followUser:u,follow:m,setShowModal:f}),r.a.createElement(x,{type:"\u041f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u0438",data:c.followers}),r.a.createElement(x,{type:"\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0438",data:c.signed})),r.a.createElement("div",{className:"home-page__people"},r.a.createElement(p,{user:c}),r.a.createElement("div",{className:"posts_schema"},c._id===s._id&&r.a.createElement(Y,null),r.a.createElement(W,{posts:c.posts})))))})),Z=(a(211),a(14)),ee=(a(212),a(213),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return e.length>t?e.slice(0,t)+"...":e}),te=Object(S.b)((function(e){var t=e.auth,a=e.dialogs;return{user:t.user,dialogId:a.currentDialogId}}),{setDialogId:function(e){return function(t){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:t({type:"SET_CURRENT_DIALOG_ID",payload:e});case 1:case"end":return a.stop()}}))}}})((function(e){var t=e.dialog,a=e.setDialogId,n=e.user,c=e.dialogId,l=n._id===t.partner._id?t.author:t.partner;return r.a.createElement(g.b,{className:i()("dialog-item",{selected:t._id===c}),to:"/dialogs/".concat(t._id),onClick:function(){return a(t._id)}},r.a.createElement("div",{className:"dialog-item_avatar"},r.a.createElement(E,{small:!0,img:l.avatar})),r.a.createElement("div",{className:"dialog-item_userdata"},r.a.createElement("div",{className:"dialog-item_userdata-name"},ee(l.fullName),r.a.createElement("span",null,r.a.createElement(I.a,{format:"DD/MM HH:mm"},t.createdAt))),r.a.createElement("div",{className:"dialog-item_userdata-text"},n._id===t.lastMessage.user._id?"\u0412\u044b: "+ee(t.lastMessage.text):ee(t.lastMessage.text))))})),ae=(a(214),Object(S.b)(null,{setFilter:function(e){return function(t){t({type:"SET_FILTER",payload:e})}}})((function(e){var t=e.setFilter;return r.a.createElement(u,null,r.a.createElement("form",{className:"dialog_search"},r.a.createElement(M,{placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",onChange:function(e){e.preventDefault(),t(e.target.value)},type:"search"})))}))),ne=function(e){var t=e.dialogs;return r.a.createElement("div",{className:"dialogs_wrap"},r.a.createElement(ae,null),r.a.createElement(u,{noIndentation:!0},r.a.createElement("div",{className:"dialogs"},0===t.length?r.a.createElement("p",{className:"empty_dialogs"},r.a.createElement("i",{className:"fas fa-inbox"}),"\u0414\u0438\u0430\u043b\u043e\u0433\u043e\u0432 \u043d\u0435\u0442"):t.map((function(e){return r.a.createElement(te,{key:e._id,dialog:e})})))))},re=a(109),ce=a.n(re)()("/"),le=function(e,t,a){return""===t?Object(Z.a)(e):e.filter((function(e){return e.partner._id===a._id?-1!==e.author.fullName.toLowerCase().indexOf(t.toLowerCase()):-1!==e.partner.fullName.toLowerCase().indexOf(t.toLowerCase())}))},se=Object(S.b)((function(e){var t=e.dialogs,a=t.dialogs,n=t.filter,r=t.loading,c=e.auth.user;return{dialogs:c&&a?le(a,n,c):[],loading:r,filter:n,user:c}}),{getDialogs:function(){return function(e){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.awrap(N.a.get("/api/dialogs"));case 3:t=a.sent,e({type:"GET_DIALOGS",payload:t.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),e(y("error",a.t0.response.data.error));case 10:case"end":return a.stop()}}),null,null,[[0,7]])}}})((function(e){var t=e.getDialogs,a=e.dialogs,c=e.loading,l=e.user;return Object(n.useEffect)((function(){return t(),ce.on("DIALOG_CREATED",t),ce.on("CREATE_MESSAGE",t),function(){ce.removeListener("DIALOG_CREATED",t),ce.removeListener("CREATE_MESSAGE",t)}}),[t]),r.a.createElement(r.a.Fragment,null,l&&a?r.a.createElement(ne,{dialogs:a,loading:c}):r.a.createElement(q,null))})),oe=(a(245),a(246),function(e){var t=e.text,a=e.createdAt,n=e.isMe;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:i()("message-item",{my:n})},t,r.a.createElement("span",{className:"message-item_date"},r.a.createElement(I.a,{format:"DD/MM | HH:mm"},a))))}),ie=(a(247),Object(S.b)((function(e){var t=e.dialogs,a=e.theme;return{currentId:t.currentDialogId,theme:a.theme}}),{sendMessageOnServer:function(e){var t=e.text,a=e.dialogId;return function(){return h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.awrap(N.a.post("/api/dialogs/create-message/".concat(a),{text:t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}))}}})((function(e){var t=e.theme,a=e.currentId,c=e.sendMessageOnServer,l=Object(n.useState)(""),s=Object(L.a)(l,2),o=s[0],i=s[1],m=Object(n.useState)(!1),d=Object(L.a)(m,2),f=d[0],p=d[1],E={dialogId:a,text:o};return r.a.createElement(u,null,r.a.createElement("div",{className:"message-create"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==o.trim()&&(ce.emit("MESSAGE_CLIENT",E),c(E),i(""))},className:"send-message_form"},r.a.createElement(M,{type:"text",name:"message",placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",onChange:function(e){i(e.target.value)},value:o,onFocus:function(){return p(!1)}}),r.a.createElement("i",{className:"fas fa-laugh-wink",onClick:function(){return p(!0)}},f?r.a.createElement("span",{className:"message-create_picker"},r.a.createElement(K.a,{onSelect:function(e){i(o+e.native)},darkMode:"light"===t,set:"apple"})):null),r.a.createElement(U,null,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))}))),ue=function(e){var t=e.dialogId,a=e.messages,c=e.messageRef,l=e.scroll,s=e.currentUser,o=e.setLimit,i=e.limit;return Object(n.useEffect)((function(){l()}),[l]),r.a.createElement("div",{className:"message_wrap"},a&&a.count>i?r.a.createElement("span",{onClick:o,className:"messages-loadmore"},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0435 10 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"):null,r.a.createElement("div",{ref:c,className:"messages"},s&&a?a.messages.map((function(e){return r.a.createElement(oe,Object.assign({key:e._id,isMe:s._id===(e.user._id||e.user)},e))})):r.a.createElement("p",{className:"select_dialog"},r.a.createElement("i",{className:"fas fa-hand-point-left"}),r.a.createElement("span",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0438\u0430\u043b\u043e\u0433"))),t?r.a.createElement(ie,null):null)},me=Object(S.b)((function(e){var t=e.messages,a=e.dialogs,n=e.auth;return{messages:t.messages,dialogId:a.currentDialogId,user:n.user,limit:t.limit}}),{setLimitMessages:function(e){return function(t){t({type:"SET_LIMIT_MESSAGES",payload:e})}},loadedMessages:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return function(a){var n;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h.a.awrap(N.a.get("/api/dialogs/messages/".concat(e,"?limit=").concat(t)));case 3:n=r.sent,a({type:"LOADED_MESSAGES",payload:{messages:n.data.messages,count:n.data.count}}),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),y("error",r.t0.response.data.error);case 10:case"end":return r.stop()}}),null,null,[[0,7]])}},createMessage:function(e,t){return function(a){return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:try{e.dialogId===t&&a({type:"CREATE_MESSAGE",payload:e})}catch(r){y("error",r.response.data.error)}case 1:case"end":return n.stop()}}))}}})((function(e){var t=e.messages,a=e.loadedMessages,c=e.dialogId,l=e.user,s=e.createMessage,o=e.limit,i=e.setLimitMessages,u=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=function(e){s(e,c)};return a(c,o),ce.on("CREATE_MESSAGE",e),function(){return ce.removeListener("CREATE_MESSAGE",e)}}),[c,o]),r.a.createElement(ue,{scroll:function(){var e=u.current.scrollHeight-u.current.clientHeight;u.current.scrollTop=e>0?e:0},messageRef:u,messages:t,currentUser:l,dialogId:c,limit:o,setLimit:function(){i(10)}})})),de=function(){return r.a.createElement("div",{className:"dialog-page"},r.a.createElement(se,null),r.a.createElement(me,null))},fe=(a(248),a(19)),pe=a(3),Ee=(a(249),function(e){e?N.a.defaults.headers.common.Authorization=e:delete N.a.defaults.headers.common.Authorization}),ge=function(){return function(e){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return localStorage.token&&Ee(localStorage.token),a.prev=1,a.next=4,h.a.awrap(N.a.get("/api/users/user/me"));case 4:t=a.sent,e({type:"USER_LOADED",payload:t.data}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),e({type:"AUTH_ERROR"});case 11:case"end":return a.stop()}}),null,null,[[1,8]])}},ve=a(18),be=a(110),he=a(111),_e=[],Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_ALERT":return[].concat(Object(Z.a)(e),[n]);case"REMOVE_ALERT":return e.filter((function(e){return e.id!==n}));default:return e}},Oe={dialogs:null,loading:!1,currentDialogId:window.location.pathname.split("dialogs/")[1],filter:"",dialogOpened:!1},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_DIALOGS":return Object(pe.a)({},e,{loading:!1,dialogs:n});case"SET_FILTER":return Object(pe.a)({},e,{filter:n});case"SET_CURRENT_DIALOG_ID":return Object(pe.a)({},e,{currentDialogId:n,loading:!1});default:return e}},we={messages:null,loading:!0,limit:8},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"LOADED_MESSAGES":return Object(pe.a)({},e,{loading:!1,messages:n});case"CREATE_MESSAGE":return Object(pe.a)({},e,{loading:!1,messages:Object(pe.a)({},e.messages,{messages:[].concat(Object(Z.a)(e.messages.messages),[n])})});case"SET_LIMIT_MESSAGES":return Object(pe.a)({},e,{limit:e.limit+=n});default:return e}},Se={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null},xe=function(e,t){return Object(pe.a)({},e,{posts:e.posts.map((function(e){return e._id===t.postId?Object(pe.a)({},e,{likes:Object(Z.a)(t.likes)}):e}))})},ke=function(e,t){var a=Object(Z.a)(e.posts);return a.unshift(t),Object(pe.a)({},e,{posts:a})},Ae=function(e,t){return Object(pe.a)({},e,{posts:e.posts.filter((function(e){return e._id!==t}))})},Ce=function(e,t){var a=t.postId,n=t.comment;return Object(pe.a)({},e,{posts:e.posts.map((function(e){return e._id===a?Object(pe.a)({},e,{comments:[].concat(Object(Z.a)(e.comments),[n])}):e}))})},Ie=function(e,t){var a=t.postId,n=t._id;return Object(pe.a)({},e,{posts:e.posts.map((function(e){return e._id===a?Object(pe.a)({},e,{comments:e.comments.filter((function(e){return e._id!==n}))}):e}))})},Te=function(e,t){return Object(pe.a)({},e,{posts:e.posts.map((function(e){return e._id===t?Object(pe.a)({},e,{showComments:!e.showComments}):e}))})},Le={user:null,loading:!0,users:[],toggleFollow:!1,friends:null},Re={theme:localStorage.getItem("theme")||"dark"},Me={searchVisible:!1,showModal:null},De=Object(ve.combineReducers)({alert:Ne,dialogs:ye,messages:je,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"USER_LOADED":return Object(pe.a)({},e,{isAuthenticated:!0,loading:!1,user:n});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return localStorage.setItem("token",n),Object(pe.a)({},e,{token:n,isAuthenticated:!0,loading:!1});case"REGISTER_FAIL":case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT":return localStorage.removeItem("token"),Object(pe.a)({},e,{token:null,isAuthenticated:!1,loading:!1,user:null});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_USER":return Object(pe.a)({},e,{user:n,loading:!1,toggleFollow:!1});case"EDIT_USER":return Object(pe.a)({},e);case"GET_ALL_USERS":return Object(pe.a)({},e,{users:n,loading:!1});case"UNFOLLOW_USER":return Object(pe.a)({},e,{loading:!1,toggleFollow:!1,user:Object(pe.a)({},e.user,{followers:n})});case"FOLLOW_USER":return Object(pe.a)({},e,{loading:!1,user:Object(pe.a)({},e.user,{followers:n}),toggleFollow:!0});case"CLEAR_USER":return{user:null,loading:!0,users:null,toggleFollow:!1};case"CREATE_POST":return Object(pe.a)({},e,{loading:!1,user:ke(e.user,n)});case"LIKE_UNLIKE":return Object(pe.a)({},e,{loading:!1,user:xe(e.user,n)});case"DELETE_POST":return Object(pe.a)({},e,{loading:!1,user:Ae(e.user,n)});case"CREATE_COMMENT":return Object(pe.a)({},e,{user:Ce(e.user,n)});case"DELETE_COMMENT":return Object(pe.a)({},e,{user:Ie(e.user,n)});case"VISIBLE_COMMENTS":return Object(pe.a)({},e,{user:Te(e.user,n)});case"GET_FRIENDS":return Object(pe.a)({},e,{friends:Object(Z.a)(n)});case"SET_AVATAR":return Object(pe.a)({},e,{user:Object(pe.a)({},e.user,{avatar:n})});default:return e}},theme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"CHANGE_THEME":return Object(pe.a)({},e,{theme:n});default:return e}},others:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SEARCH_VISIBLE":return Object(pe.a)({},e,{searchVisible:n});case"OPEN_MODAL":return Object(pe.a)({},e,{showModal:n});default:return e}}}),Ue=[he.a],Fe=Object(ve.createStore)(De,{},Object(be.composeWithDevTools)(ve.applyMiddleware.apply(void 0,Ue))),Ge=Object(S.b)(null,{registerSuccess:function(e,t){return function(a){var n,r,c;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,h.a.awrap(N.a.post("/api/auth/register",e));case 3:n=l.sent,a({type:"REGISTER_SUCCESS",payload:n.data}),a(ge()),t.push("/"),a(y("success","\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!")),l.next=16;break;case 10:l.prev=10,l.t0=l.catch(0),r=l.t0.response.data.errors,c=l.t0.response.data.error,r?r.forEach((function(e){return a(y("error",e.msg))})):c&&a(y("error",c)),a({type:"REGISTER_FAIL"});case 16:case"end":return l.stop()}}),null,null,[[0,10]])}}})(Object(s.g)((function(e){var t=e.selectedAuth,a=e.registerSuccess,c=e.history,l=Object(n.useState)({email:"",password:"",repeatPassword:"",firstName:"",secondName:""}),s=Object(L.a)(l,2),o=s[0],i=s[1],u=function(e){var t=e.target,a=t.name,n=t.value;i(Object(pe.a)({},o,Object(fe.a)({},a,n)))},m=o.email,d=o.password,f=o.repeatPassword,p=o.firstName,E=o.secondName;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=o.repeatPassword,n=Object(D.a)(o,["repeatPassword"]);d===t?a(n,c):Fe.dispatch(y("error","\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"))},className:"register"},r.a.createElement(M,{name:"email",type:"email",placeholder:"\u0412\u0430\u0448 email",onChange:u,value:m}),r.a.createElement(M,{name:"firstName",type:"text",placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",onChange:u,value:p}),r.a.createElement(M,{name:"secondName",type:"text",placeholder:"\u0412\u0430\u0448\u0430 \u0444\u0430\u043c\u0438\u043b\u0438\u044f",onChange:u,value:E}),r.a.createElement(M,{name:"password",type:"password",placeholder:"\u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:u,value:d}),r.a.createElement(M,{name:"repeatPassword",type:"password",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:u,value:f}),r.a.createElement("div",{className:"account_question"},"\u0415\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?",r.a.createElement("span",{onClick:function(){return t("login")}},"\u0412\u043e\u0439\u0442\u0438")),r.a.createElement(U,null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))}))),Ve=(a(250),Object(S.b)(null,{login:function(e,t){return function(a){var n,r,c;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,h.a.awrap(N.a.post("/api/auth/login",e));case 3:n=l.sent,a({type:"LOGIN_SUCCESS",payload:n.data}),a(ge()),a(y("success","\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043b\u0438\u0441\u044c!")),t.push("/"),l.next=16;break;case 10:l.prev=10,l.t0=l.catch(0),r=l.t0.response.data.errors,c=l.t0.response.data.error,r?r.forEach((function(e){return a(y("error",e.msg))})):c&&a(y("error",c)),a({type:"LOGIN_FAIL"});case 16:case"end":return l.stop()}}),null,null,[[0,10]])}}})(Object(s.g)((function(e){var t=e.selectedAuth,a=e.history,c=e.login,l=Object(n.useState)({email:"",password:""}),s=Object(L.a)(l,2),o=s[0],i=s[1],u=function(e){var t=e.target,a=t.name,n=t.value;i(Object(pe.a)({},o,Object(fe.a)({},a,n)))},m=o.email,d=o.password;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c(o,a)},className:"login"},r.a.createElement(M,{name:"email",type:"email",placeholder:"\u0412\u0430\u0448 email",onChange:u,value:m}),r.a.createElement(M,{name:"password",type:"password",placeholder:"\u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:u,value:d}),r.a.createElement("div",{className:"account_question"},"\u041d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430?",r.a.createElement("span",{onClick:function(){return t("register")}},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")),r.a.createElement(U,null,"\u0412\u043e\u0439\u0442\u0438"))})))),He=Object(S.b)((function(e){return{user:e.auth.user}}))((function(e){var t=e.user,a=Object(n.useState)("login"),c=Object(L.a)(a,2),l=c[0],o=c[1],i=function(e){return o(e)};return r.a.createElement(r.a.Fragment,null,t&&null!==t?r.a.createElement(s.a,{to:"/user/".concat(t._id)}):r.a.createElement("div",{className:"auth-page"},"login"===l?r.a.createElement(Ve,{selectedAuth:i}):r.a.createElement(Ge,{selectedAuth:i})))})),Pe=(a(251),a(252),a(253),function(e){var t=e.label,a=e.data,n=Object(D.a)(e,["label","data"]);return r.a.createElement("div",{className:"custom-select_field"},r.a.createElement("label",{className:"custom-select_label"},t),r.a.createElement("select",Object.assign({},n,{className:"custom-select_select"}),a.map((function(e){var t=e.value,a=e.name;return r.a.createElement("option",{key:t,value:t},a)}))))}),We=Object(S.b)((function(e){return{user:e.auth.user}}),{editUser:function(e,t){return function(a){var n,r,c;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,h.a.awrap(N.a.post("/api/users/user/edit",e));case 3:n=l.sent,a({type:"EDIT_USER"}),t.push("/user/".concat(n.data._id)),a(y("success","\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d!")),l.next=14;break;case 9:l.prev=9,l.t0=l.catch(0),r=l.t0.response.data.errors,c=l.t0.response.data.error,r?r.forEach((function(e){return a(y("error",e.msg))})):c&&a(y("error",c));case 14:case"end":return l.stop()}}),null,null,[[0,9]])}}})(Object(s.g)((function(e){var t=e.editUser,a=e.user,c=e.history,l=Object(n.useState)([{value:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439",name:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"},{value:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439",name:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439"}]),s=Object(L.a)(l,1)[0],o=Object(n.useState)({firstName:"",secondName:"",city:"",sex:"",birthday:"",about:""}),i=Object(L.a)(o,2),u=i[0],m=i[1];Object(n.useEffect)((function(){m({firstName:a&&null!==a?a.firstName:"",secondName:a&&null!==a?a.secondName:"",city:a&&null!==a?a.city:"",sex:a&&null!==a&&a.sex?a.sex:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439",birthday:a&&a.birthday?G(a.birthday):"",about:a&&null!==a?a.about:""})}),[a]);var d=function(e){var t=e.target,a=t.name,n=t.value;m(Object(pe.a)({},u,Object(fe.a)({},a,n)))},f=u.firstName,p=u.secondName,E=u.city,g=u.sex,v=u.birthday,b=u.about;return r.a.createElement("div",{className:"edit-profile"},a||null!==a?r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(u,c)},className:"editForm"},r.a.createElement(M,{name:"firstName",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",label:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f:",onChange:d,value:f||""}),r.a.createElement(M,{name:"secondName",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e",label:"\u0412\u0430\u0448\u0430 \u0444\u0430\u043c\u0438\u043b\u0438\u044f:",onChange:d,value:p||""}),r.a.createElement(M,{name:"city",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",label:"\u0412\u0430\u0448 \u0433\u043e\u0440\u043e\u0434:",onChange:d,value:E||""}),r.a.createElement(Pe,{name:"sex",label:"\u041f\u043e\u043b:",data:s,onChange:d,value:g||"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"}),r.a.createElement(M,{name:"birthday",type:"date",label:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f:",onChange:d,value:v}),r.a.createElement(B,{name:"about",placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043e \u0441\u0435\u0431\u0435",label:"\u041e \u0441\u0435\u0431\u0435:",onChange:d,value:b||""}),r.a.createElement(U,null,"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"))):r.a.createElement(q,null))}))),Be=function(){return r.a.createElement("div",{className:"edit-user-page"},r.a.createElement("div",{className:"edit-user-page__heading"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"),r.a.createElement(We,null))},Ke=(a(254),a(255),{"--primary-one":"rgb(52,117,165)","--primary-two":"rgb(35,56,68)","--color-active":"rgb(222, 250, 67)","--color-main":"rgb(41,57,62)","--color-bg":"rgb(30, 35, 47)","--color-btn-unfollow":"rgb(0, 191, 255)","--color-shadow":"rgb(0, 0, 0)","--color-line":"rgb(41,57,62)","--color-main-text":"rgb(255,255,255)","--color-icon":"rgb(204, 204, 204)","--color-support-text":"rgb(255, 255, 255)","--color-date":"rgb(128, 128, 128)","--color-icon-special":"rgb(255, 192, 203)","--color-danger":"rgb(216, 88, 88)","--color-my-message":"rgb(52,112,165)","--color-success":"rgb(52,112,165)","--color-swapi":"rgb(9, 11, 24)","--color-alert-success":"rgb(52,112,165)"}),Ye={"--primary-one":"rgba(86,67,250,1)","--primary-two":"rgba(85,197,122,1)","--color-active":"rgb(222, 250, 67)","--color-main":"rgb(255, 255, 255)","--color-bg":"rgb(239,243,245)","--color-btn-unfollow":"rgb(0, 191, 255)","--color-shadow":"rgb(0, 0, 0)","--color-line":"rgb(239,243,245)","--color-main-text":"rgb(0,0,0)","--color-support-text":"rgb(255, 255, 255)","--color-icon":"rgb(204, 204, 204)","--color-date":"rgb(128, 128, 128)","--color-icon-special":"rgb(255, 192, 203)","--color-danger":"rgb(216, 88, 88)","--color-my-message":"rgb(239,254,222)","--color-success":"rgb(52,112,165)","--color-swapi":"rgb(9, 11, 24)","--color-alert-success":"rgba(85,197,122,1)"},qe=function(e){var t="light"===e?Ye:Ke;Object.keys(t).map((function(e){var a=t[e];return document.documentElement.style.setProperty(e,a)}))},ze=Object(S.b)((function(e){return{theme:e.theme.theme}}),{changeTheme:function(e){return function(t){qe(e),localStorage.setItem("theme",e),t({type:"CHANGE_THEME",payload:e})}}})((function(e){var t=e.theme,a=e.changeTheme,n=Object(D.a)(e,["theme","changeTheme"]),c="dark"===t?"light":"dark";return r.a.useEffect((function(){qe(c)}),[c]),r.a.createElement("div",Object.assign({onClick:function(){return a(c)},className:"custom-toggle-theme"},n),"dark"===t?r.a.createElement("i",{className:"fas fa-sun"}):r.a.createElement("i",{className:"fas fa-moon"}))})),Je=(a(256),a(112)),$e=Object(S.b)(null,{getAllUsers:function(e){return function(t){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(""===e){n.next=13;break}return n.prev=1,n.next=4,h.a.awrap(N.a.get("/api/users/user/".concat(e)));case 4:a=n.sent,t({type:"GET_ALL_USERS",payload:a.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),n.t0&&t({type:"GET_ALL_USERS",payload:null});case 11:n.next=14;break;case 13:t({type:"GET_ALL_USERS",payload:[]});case 14:case"end":return n.stop()}}),null,null,[[1,8]])}},setSearchVisible:w})((function(e){var t=e.getAllUsers,a=e.setSearchVisible;return r.a.createElement("div",{className:"search-users"},r.a.createElement(Je.DebounceInput,{element:M,minLength:1,debounceTimeout:1200,onChange:function(e){return t(e.target.value.trim())},onFocus:function(){return a(!0)},placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f...",type:"search"}))})),Qe=(a(259),Object(S.b)((function(e){var t=e.users;return{users:t.users,loading:t.loading}}),{setSearchVisible:w})((function(e){var t=e.users,a=e.setSearchVisible,n=t&&null!==t&&t.length>0&&t.map((function(e){return r.a.createElement("ul",{key:e._id,className:"searched-users_list"},r.a.createElement(g.b,{className:"searched-users_item",to:"/user/".concat(e._id)},r.a.createElement(E,{small:!0,img:e.avatar}),e.fullName))})),c=t&&null!==t&&0===t.length&&r.a.createElement("p",{className:"empty_users"},r.a.createElement("i",{className:"fas fa-inbox"}),"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),l=null==t&&r.a.createElement("p",{className:"empty_users"},r.a.createElement("i",{className:"fas fa-inbox"}),"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e");return r.a.createElement("div",{className:"searched-users"},r.a.createElement("div",{className:"searched-users_options"},r.a.createElement("h3",{className:"searched-users_heading"},"\u041b\u044e\u0434\u0438:"),r.a.createElement("p",{className:"searched-users_close",onClick:function(){return a(!1)}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c")),n||c||l)}))),Xe=Object(S.b)((function(e){var t=e.auth,a=e.others;return{isAuthenticated:t.isAuthenticated,loading:t.loading,user:t.user,searchVisible:a.searchVisible}}),{logout:function(){return function(e){e({type:"LOGOUT"}),e({type:"CLEAR_USER"})}}})(Object(s.g)((function(e){var t=e.isAuthenticated,a=e.loading,n=e.user,c=e.logout,l=e.searchVisible,s=r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"header__list-item"},r.a.createElement(E,{small:!0,img:n&&n.avatar})),r.a.createElement("li",{className:"header__list-item"},r.a.createElement($e,null),l?r.a.createElement(Qe,null):null),r.a.createElement("li",{className:"header__list-item"},r.a.createElement(g.b,{className:"header__list-link",to:"/user/".concat(null!==n&&n._id)},r.a.createElement("i",{className:"fas fa-user"}),"\u041c\u043e\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430")),r.a.createElement("li",{className:"header__list-item"},r.a.createElement(g.b,{className:"header__list-link",to:"/dialogs"},r.a.createElement("i",{className:"fas fa-comments"}),"\u0414\u0438\u0430\u043b\u043e\u0433\u0438")),r.a.createElement("li",{className:"header__list-item"},r.a.createElement(g.b,{to:"/",className:"header__list-link",onClick:function(){return c()}},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),"\u0412\u044b\u0439\u0442\u0438"))),o=r.a.createElement(g.b,{className:"header__list-link",to:"/"},r.a.createElement("i",{className:"fas fa-sign-in-alt"}),"\u0412\u0445\u043e\u0434");return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header__logo"},r.a.createElement(g.b,{className:"header__logo-link",to:n&&null!==n?"/user/".concat(n._id):"/"},r.a.createElement("i",{className:"fas fa-spinner"}))),r.a.createElement(ze,null),r.a.createElement("ul",{className:"header__list"},t&&!a&&null!==n?s:o))}))),Ze=(a(260),Object(S.b)((function(e){return{messages:e.alert}}))((function(e){var t=e.messages;return r.a.createElement(r.a.Fragment,null,t&&t.length?t.map((function(e){return r.a.createElement("div",{key:e.id,className:i()("alert",{many:t.length>1,success:"success"===e.type,error:"error"===e.type})},e.message)})):null)}))),et=Object(S.b)((function(e){var t=e.auth;return{isAuthenticated:t.isAuthenticated,loading:t.loading,user:t.user}}))((function(e){var t=e.component,a=e.isAuthenticated,n=e.loading,c=Object(D.a)(e,["component","isAuthenticated","loading"]);return r.a.createElement(s.b,Object.assign({},c,{render:function(e){return a||n?r.a.createElement(t,e):r.a.createElement(s.a,{to:"/"})}}))})),tt=Object(S.b)((function(e){return{user:e.auth.user}}))((function(e){e.user;return r.a.createElement("div",{className:"App"},r.a.createElement(Xe,null),r.a.createElement(Ze,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0,component:He}),r.a.createElement(et,{exact:!0,path:"/user/:id",component:X}),r.a.createElement(et,{path:"/dialogs",component:de}),r.a.createElement(et,{exact:!0,path:"/edit-user",component:Be}),r.a.createElement(s.b,{render:function(){return r.a.createElement("h1",null,"404")}})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));localStorage.token&&Ee(localStorage.token),Fe.dispatch(ge()),l.a.render(r.a.createElement(S.a,{store:Fe},r.a.createElement(g.a,null,r.a.createElement(tt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[113,1,2]]]);
//# sourceMappingURL=main.1ef6f903.chunk.js.map